---
template: overrides/blogs.html
---
# 用最通俗的方式聊聊区块链和比特币

近期因为虚拟货币价格大起大落，和其相关的话题，例如比特币，区块链等等又一次吸引了大家的注意。例如从谷歌趋势（google trends）里得到的数据来看，"比特币"的全球搜索热度从2020年底起和它的价格一样"一飞冲天","区块链"相关的搜索量也随之飙升。

<!-- <script type="text/javascript" src="https://ssl.gstatic.com/trends_nrtr/2578_RC01/embed_loader.js"></script> <script type="text/javascript"> trends.embed.renderExploreWidget("TIMESERIES", {"comparisonItem":[{"keyword":"bitcoin","geo":"","time":"2020-06-05 2021-06-05"}],"category":0,"property":""}, {"exploreQuery":"q=bitcoin&date=today 12-m","guestPath":"https://trends.google.com:443/trends/embed/"}); </script> -->

<!-- <script type="text/javascript" src="https://ssl.gstatic.com/trends_nrtr/2578_RC01/embed_loader.js"></script> <script type="text/javascript"> trends.embed.renderExploreWidget("TIMESERIES", {"comparisonItem":[{"keyword":"blockchain","geo":"","time":"2020-06-05 2021-06-05"}],"category":0,"property":""}, {"exploreQuery":"q=blockchain&date=today 12-m","guestPath":"https://trends.google.com:443/trends/embed/"}); </script> -->

看来人们除了想了解比特币行情以外，越来越多的人也想弄清楚究竟什么是区块链。作为对区块链一直很感兴趣的我也不例外。坦白的说，之前我对这一概念的理解只停留在"我的一个朋友告诉我区块链是XXX"的阶段，所以总觉得它神乎其神。最近因为实在想在近期"试水"币圈，所以下决心要好好弄清楚区块链，虚拟货币等等概念，争取做一名"死也瞑目"的韭菜。接下来我就想用最通俗的语言，介绍下我对区块链的理解，并且分享下如何尝试用python代码实现一个简单的加密货币应用。

哈希值:

## 什么是区块链？

在解释区块链之前，我还想先聊聊区块链最初被发明出来的目的。区块链最早是1991年研发出来，用于给文档打上时间戳，使得文档里的内容不能被修改。所以区块链的各种特性和功能在设计之初，就是为了确保区块链里的信息不会被篡改。

ok，下面进入正题：

区块链，就是由一组包含信息的区块组成的链条。每一个区块大致包含以下三个内容：该区块的哈希值（可以理解成一个区块的"指纹"），上一个区块的哈希值，以及这一个区块里所存储的数据。学过数据结构的同学可能会感觉这和链表非常相似——没错，我一开始也是这么理解的。与链表不同的是，区块的哈希值是在该区块**创建**时，根据这个区块存储的数据信息和上一区块的哈希值一起作为输入生成的。这样一来区块链和链表不同的地方就体现出来了：在区块链里如果任何一个中间区块（block_K）的信息发生了改变，block_K就不再是之前的block_K了（哈希值改变了），又因为下一区块会存储前一区块的哈希值，链中任意区块的变化都能通过简单的哈希值校验来发现。

这样一来，如果要"篡改"存储在某个区块链里的信息，则需要重新计算该区块后面所有区块的哈希值。然而，就目前计算机的强大计算性能来说，这也不是什么大问题，所以在区块链中，还引入了另一个神奇的机制：工作量证明机制（Proof of Work）

### 工作量证明机制

工作量证明机制创建的目的是为了强制让计算机消耗一定量的计算资源，才能计算出一个区块的哈希值，使得计算机篡改区块信息的成本增加。那么如何给计算机出一道可能需要10分钟才能解出来的题目呢？

我们知道，哈希算法类似于将一个简单输入值x，通过一个很复杂的函数（散列函数），计算出哈希值y。也就是

$f(x) = y$

其中，$f(x)$ 可以想象成是比$x^2+\sqrt{x}-\int ^4_3 \sum ^x_3 \frac{1}{x^2}{\rm d}x$ 复杂的多的公式。计算机通过$x$可以很容易解出$y$，但是如果知道$y$想要得到$x$几乎不可能。

如果人类给出一个这样的$y$，计算机只能通过用一个个不同的$x$暴力尝试出刚好能计算出y的答案。但是在散列算法中，这对于计算机来说也是个不可能完成的任务。所以为了控制难度，人类可以给出符合难度的答案范围，例如让计算机凑出前缀有4个0(格式类似'0000XXXXX')的散列函数。这样也许通过计算机的几千次尝试，可以找到符合条件的"$x$"。答案范围越小，计算机需要尝试的次数就越多，修改区块链需要的开销就越大。

在比特币区块链中，产生一个区块的时候也同样需要工作量证明，同时为了抵消电脑硬件带来的计算性能提升，比特币通过提高难度（减小答案范围）的方式，让目前一个区块产生的平均时间控制在了10-20分钟左右。

<!-- TODO（演示代码） -->

此外，区块链还应用了一个很重要的机制来保护自身信息的安全性——分布式。

### 分布式

分布式的大意就是，所有参与区块链网络的用户，都可以得到一份完整的区块链信息。当一个用户想要把一个存储信息的区块加入区块链时，他需要把这个申请发布给所有用户。用户验证区块没问题之后才会把区块添加至自己的区块链上，用户也只会验证最长的那一串区块链。这也叫做"共识机制".在这种机制下，想篡改信息的攻击者只有修改区块链上的一系列区块，完成工作量证明，再控制全网络超过半数的用户，才可能让被篡改的区块加到链上。

有了这些机制的保护，区块链的篡改几乎成了不可能。在虚拟货币中，通常还加入了区块奖励，以此来让拥有算力的人们通过开发区块获得比篡改区块更高的回报，从收益角度避免信息篡改的发生。


## 区块链有那些应用方向？

除了虚拟货币以外，区块链技术其实还有大量应用场景，习大大也曾强调"区块链技术的集成应用在新的技术革新和产业变革中起着重要作用"。一方面，只要是记录都可以保存在区块链中，例如可以存储税务信息，医保信息，食品溯源信息，甚至健康码的背后也是区块链技术的加持。另一方面，许多机构也在探索去中心化的各类产品，如去中心化的无线通信网络，
<!-- TODO（需要继续research） -->

<!-- TODO 结尾 奥威尔的书1984里描述过这样一个政府： -->

## 如何用代码实现一个简单的区块链应用 - 加密货币？

<!-- TODO （代码整理） -->